From 1621a2f59c25a78737eae11295d150f651738674 Mon Sep 17 00:00:00 2001
From: Pavel Sokolov <pavel.m.sokolov@gmail.com>
Date: Wed, 15 Nov 2017 13:42:52 +0300
Subject: [PATCH] Fixing mailsimulator submit button

---
 mod/assign/amd/build/grading_panel.min.js | Bin 5791 -> 5828 bytes
 mod/assign/amd/src/grading_panel.js       |   4 +++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/mod/assign/amd/build/grading_panel.min.js b/mod/assign/amd/build/grading_panel.min.js
index ed1ab5c65c77666cef227db62a61f4b210c04f89..4f66f0f6c4310721a3d15814d929ef3674f489cc 100644
GIT binary patch
delta 51
zcmbQQdqj6bv51;dZenImab|95PGU)ZQG8lzYD!XKa<-D9ZAnIEv0h$cZmODE>gEy=
GZ6*NwEfQn^

delta 14
VcmX@2J70H0u?S=0=9wbeOaLmu1mpk!

diff --git a/mod/assign/amd/src/grading_panel.js b/mod/assign/amd/src/grading_panel.js
index a9abbac852..681f4a4c87 100644
--- a/mod/assign/amd/src/grading_panel.js
+++ b/mod/assign/amd/src/grading_panel.js
@@ -381,7 +381,9 @@ define(['jquery', 'core/yui', 'core/notification', 'core/templates', 'core/fragm
         var region = $(this._region);
         // Add an event listener to prevent form submission when pressing enter key.
         region.on('submit', 'form', function(e) {
-            e.preventDefault();
+            if (this.name != 'mailsimulator_feedback') {
+                e.preventDefault();
+            }
         });
 
         docElement.on('next-user', this._getNextUser.bind(this));
-- 
2.15.0

