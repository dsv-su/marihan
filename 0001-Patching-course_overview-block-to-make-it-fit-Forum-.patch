From 3754f6cb43177116b87bf9131fd31b9b7516cb20 Mon Sep 17 00:00:00 2001
From: Pavel Sokolov <pavel.m.sokolov@gmail.com>
Date: Tue, 21 Jul 2015 13:05:02 +0300
Subject: [PATCH 1/1] Patching course_overview block to make it fit Forum
 instance

---
 blocks/course_overview/block_course_overview.php |  8 ++++++--
 blocks/course_overview/styles.css                | 10 +++++++++-
 blocks/moodleblock.class.php                     |  2 +-
 3 files changed, 16 insertions(+), 4 deletions(-)

diff --git a/blocks/course_overview/block_course_overview.php b/blocks/course_overview/block_course_overview.php
index ae244ef..c56af4f 100644
--- a/blocks/course_overview/block_course_overview.php
+++ b/blocks/course_overview/block_course_overview.php
@@ -39,7 +39,7 @@ class block_course_overview extends block_base {
      * Block initialization
      */
     public function init() {
-        $this->title   = get_string('pluginname', 'block_course_overview');
+        $this->title = get_string('modulenameplural', 'mod_forum');
     }
 
     /**
@@ -83,7 +83,7 @@ class block_course_overview extends block_base {
 
         // Number of sites to display.
         if ($this->page->user_is_editing() && empty($config->forcedefaultmaxcourses)) {
-            $this->content->text .= $renderer->editing_bar_head($totalcourses);
+            //$this->content->text .= $renderer->editing_bar_head($totalcourses);
         }
 
         if (empty($sortedcourses)) {
@@ -125,4 +125,8 @@ class block_course_overview extends block_base {
         $config = get_config('block_course_overview');
         return !empty($config->showwelcomearea);
     }
+
+    public function instance_can_be_collapsed() {
+        return false;
+    }
 }
diff --git a/blocks/course_overview/styles.css b/blocks/course_overview/styles.css
index 7a6ab5e..695138f 100644
--- a/blocks/course_overview/styles.css
+++ b/blocks/course_overview/styles.css
@@ -36,11 +36,14 @@
 
 .block_course_overview .welcome_message {
     float: left;
-    padding: 10px;
+    padding: 0px 10px;
     vertical-align: middle;
     border-collapse: separate;
     clear: none;
 }
+.block_course_overview .welcome_message h2 {
+    line-height: 35px;
+}
 .dir-rtl .block_course_overview .welcome_message {
     float:right;
 }
@@ -74,6 +77,7 @@
 
 .block_course_overview .course_list {
     width: 100%;
+    margin-top: 15px;
 }
 
 .block_course_overview div.flush {
@@ -104,3 +108,7 @@
 .block_course_overview .content .course_list .movehere{
     margin-bottom: 15px;
 }
+
+.block_course_overview {
+    box-shadow: none !important;
+}
diff --git a/blocks/moodleblock.class.php b/blocks/moodleblock.class.php
index f16b0bc..ec820ad 100644
--- a/blocks/moodleblock.class.php
+++ b/blocks/moodleblock.class.php
@@ -244,7 +244,7 @@ class block_base {
             $this->arialabel = $bc->arialabel;
         }
 
-        if ($this->page->user_is_editing()) {
+        if ($this->page->user_is_editing() && $this->name() !== 'course_overview') {
             $bc->controls = $this->page->blocks->edit_controls($this);
         } else {
             // we must not use is_empty on hidden blocks
-- 
2.3.2 (Apple Git-55)

